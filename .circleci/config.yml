# Use the latest 2.1 version of CircleCI pipeline process engine.
# See: https://circleci.com/docs/configuration-reference
version: 2.1

orbs:
  ostorlab-circleci: ostorlab-circleci/ostorlab@1.0.0

jobs:
  say-hello:
    docker:
      - image: cimg/base:stable
    steps:
      - checkout
      - run:
          name: "Say hello"
          command: "echo Hello, World!"

workflows:
  use-my-orb:
    jobs:
      - ostorlab-circleci/ostorlab:
          ostorlab_api_key: iSCEx8QF.GFJ60HXUsVqeMHdhO8Xs8jvisShiz5U6
          asset_type: android-apk
          break_on_risk_rating: HIGH
          max_wait_minutes: 5
          scan_profile: fast_scan
          scan_title: testin_sbom_circleci
          target: files/app.apk
          extra: --sbom=files/package-lock.json
  say-hello-workflow:
    jobs:
      - say-hello
